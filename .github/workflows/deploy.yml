name: Deploy

on:  
  push:    
    branches:
      - main

jobs:  
  deploy:    
    runs-on: ubuntu-latest
    
    steps:      
      - name: Checkout code        
        uses: actions/checkout@v3      
        
      - name: Set up SSH key        
        uses: webfactory/ssh-agent@v0.7.0       
        with:          
          ssh-private-key: ${{ secrets.SSH_PRIVATE_KEY }}      
          
      - name: Build React app
        run: |
          cd frontend
          npm install
          npm run build

      - name: Deploy to server        
        run: |          
          # Copy the build to the server
          scp -r frontend/build/* ubuntu@test.skillnaav.com:/home/ubuntu/skillnaav-fullstack/frontend/build
          
          
